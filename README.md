# aggregation
<div dir="auto">

پروژه‌ای برای تجمیع اطلاعات
---
---

تکنولوژی‌های مورد استفاده:

- Django/Python
- Postgresql
- Redis
- Celery
- RabbitMQ

---

این پروژه به طور کلی شامل دو api است:

- v1/aggregation/upload/ :
برای آپلود فایل‌های csv
  
- v1/aggregation/download/ :
برای دانلود فایل csv خروجی
  
---

فرآیند پردازش داده‌ها در این پروژه بدین صورت است که فایل‌های آپلود شده در یک جدول از دیتابیس postgresql نگه‌داری شده و پس از هر بار آپلود فایل جدید، تسکی در پس‌زمینه اجرا شده تا فایل جدید آپلود شده را پردازش نماید، وظیفه‌ی اجرای این تسک برعهده‌ی celery و به کمک rabbitmq به عنوان message brocker است. اطلاعات نهایی پردازش شده علاوه بر ذخیره‌سازی در ردیس، بلافاصله در فایل نهایی‌ای ذخیره می‌شود؛ این فایل نهایی هنگام call شدن api مربوط به download خروجی داده می‌شود.

از آنجایی که فایل‌های آپلود شده در دیتابیس نگه‌داری می‌شوند نگرانی‌ای بابت حفظ اطلاعات نداریم و در صورت بروز هرگونه باگ و یا مشکلی این اطلاعات قابل بازیابی است، ضمناً از آنجایی که ورکر celery تسک‌ها را به ترتیب ساخته شدن اجرا می‌کند همیشه اطلاعات منطبق با آخرین فایل آپلود شده در ردیس و فایل خروجی ذخیره می‌شوند و امکان رخ دادن مشکلاتی از قبیل race condition وجود ندارد.

---

همچنین برای ساخت فایل‌های csv می‌توانیم از csv_generator.py استفاده کنیم. 


</div>
